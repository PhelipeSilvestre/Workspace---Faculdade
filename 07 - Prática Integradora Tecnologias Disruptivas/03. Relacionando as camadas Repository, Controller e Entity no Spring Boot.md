#Relacionando as camadas Repository, Controller e Entity no Spring Boot

O Spring Boot se caracteriza por organizar o código em diferentes camadas. Ao longo desse módulo, veremos as camadas Repository, Controller e alguns relacionamentos mais complexos, aplicando-os na camada Entity. Além disso, veremos como essas três camadas se relacionam no framework em questão.

No Spring, a camada Repository é responsável pela persistência dos dados, trafegados ao longo da aplicação através da(s) instância(s) de uma ou mais Entidades no banco de dados. Logo, todas as operações relacionadas ao banco ficam sob responsabilidade dessa camada – sejam elas de recuperação, persistência, atualização ou deleção de registros. Diferente das Entities, no Repositório temos interfaces ao invés de classes. Além disso, cada Entidade deverá possuir sua própria interface na camada em questão, ou seja, se criarmos uma classe chamada Aluno na camada Entity, deveremos então criar uma interface, na camada Repository, chamada AlunoRepository. Repare, aqui, na convenção de se utilizar a palavra “Repository” como sufixo ao nome da Entidade. Isso ajuda a identificar, pelo nome do arquivo, a qual entidade um repositório se refere.

Outra característica importante e bastante conveniente do Spring Boot é permitir que nosso repositório implemente interfaces de repositório pré-existentes, como a JpaRepository, a CrudRepository e a PagingAndSortingRepository. Cada uma dessas interfaces possui uma série de métodos pré-implementados, dos quais poderemos fazer uso ao declarar nossa interface e informar que estenderemos uma delas. Em geral, utilizamos a JpaRepository (que, por sua vez, já estende às outras duas). Com isso, temos disponíveis vários métodos de manipulação de dados, como os relacionados ao CRUD (findById, findAll, save, delete, etc.), além de recursos como paginação e outros.

O código abaixo demonstra a implementação do repositório relativo à Entidade Aluno – à esquerda temos o código da Entity e à direita o do Repository.

`
    @Entity
    @Table(name="aluno")
    public class Aluno{
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name="aluno_id")
    private Integer alunoId;

    @Column(name="aluno_nome")
    private String alunoNome;

    @ManyToOne
    @JoinColumn(name="turma_id")
    private Turma turma;

    //getters e setters

    }

    import
    org.springframwork.data.jpa.repository.JpaRepository;

    public interface AlunoRepository extends JpaRepository<Aluno, Integer> {
    }

`
